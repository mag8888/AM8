<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚öôÔ∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å | Aura Money</title>
    <link rel="stylesheet" href="assets/css/admin.css">
</head>
<body>
    <div class="admin-container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <header class="admin-header">
            <div class="header-content">
                <h1>‚öôÔ∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª–µ—Ç–∫–∞–º–∏</h1>
                <div class="header-actions">
                    <button class="btn btn-secondary" onclick="location.href='/'">
                        üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é
                    </button>
                    <button class="btn btn-success" onclick="adminEditor.exportConfig()">
                        üíæ –≠–∫—Å–ø–æ—Ä—Ç
                    </button>
                    <button class="btn btn-primary" onclick="adminEditor.importConfig()">
                        üìÇ –ò–º–ø–æ—Ä—Ç
                    </button>
                </div>
            </div>
        </header>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º -->
        <nav class="admin-nav">
            <button class="nav-btn active" data-section="cells">
                üìã –ö–ª–µ—Ç–∫–∏
            </button>
            <button class="nav-btn" data-section="cards">
                üÉè –ö–∞—Ä—Ç–æ—á–∫–∏
            </button>
            <button class="nav-btn" data-section="professions">
                üé≠ –ü—Ä–æ—Ñ–µ—Å—Å–∏–∏
            </button>
            <button class="nav-btn" data-section="settings">
                ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏
            </button>
        </nav>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <div class="admin-content">
            <!-- –°–µ–∫—Ü–∏—è –∫–ª–µ—Ç–æ–∫ -->
            <div id="cells-section" class="admin-section active">
                <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å —Å–ø–∏—Å–∫–æ–º –∫–ª–µ—Ç–æ–∫ -->
                <aside class="cells-sidebar">
                <div class="sidebar-header">
                    <h3>üìã –°–ø–∏—Å–æ–∫ –∫–ª–µ—Ç–æ–∫</h3>
                    <div class="filter-controls">
                        <select id="track-filter" class="filter-select">
                            <option value="all">–í—Å–µ –∫–ª–µ—Ç–∫–∏</option>
                            <option value="outer">–í–Ω–µ—à–Ω–∏–π —Ç—Ä–µ–∫</option>
                            <option value="inner">–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Ç—Ä–µ–∫</option>
                        </select>
                        <input type="text" id="search-cells" class="search-input" placeholder="üîç –ü–æ–∏—Å–∫...">
                    </div>
                </div>
                <div class="cells-list" id="cells-list">
                    <!-- –°–ø–∏—Å–æ–∫ –∫–ª–µ—Ç–æ–∫ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </aside>

            <!-- –ü–∞–Ω–µ–ª—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
            <main class="editor-panel">
                <div class="editor-header">
                    <h2 id="editor-title">–í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–µ—Ç–∫—É –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
                    <div class="editor-actions">
                        <button class="btn btn-success" id="save-cell-btn" onclick="adminEditor.saveCurrentCell()" disabled>
                            üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–ª–µ—Ç–∫—É
                        </button>
                        <button class="btn btn-primary" onclick="adminEditor.saveToServer()">
                            üöÄ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
                        </button>
                    </div>
                </div>

                <div class="editor-content" id="editor-content">
                    <div class="empty-state">
                        <div class="empty-icon">üìù</div>
                        <p>–í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–µ—Ç–∫—É –∏–∑ —Å–ø–∏—Å–∫–∞ —Å–ª–µ–≤–∞ –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</p>
                    </div>
                </div>

                <!-- –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (—Å–∫—Ä—ã—Ç–∞ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ) -->
                <div class="cell-editor-form" id="cell-editor-form" style="display: none;">
                    <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                    <section class="form-section">
                        <h3>üìå –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="cell-id">ID –∫–ª–µ—Ç–∫–∏</label>
                                <input type="text" id="cell-id" readonly>
                            </div>
                            <div class="form-group">
                                <label for="cell-track">–¢—Ä–µ–∫</label>
                                <input type="text" id="cell-track" readonly>
                            </div>
                            <div class="form-group full-width">
                                <label for="cell-name">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–ª–µ—Ç–∫–∏ *</label>
                                <input type="text" id="cell-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ" required>
                            </div>
                            <div class="form-group full-width">
                                <label for="cell-description">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                                <textarea id="cell-description" rows="3" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∫–ª–µ—Ç–∫–∏"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="cell-icon">–ò–∫–æ–Ω–∫–∞</label>
                                <input type="text" id="cell-icon" placeholder="üè†">
                            </div>
                            <div class="form-group">
                                <label for="cell-color">–¶–≤–µ—Ç</label>
                                <input type="color" id="cell-color" value="#6366f1">
                            </div>
                        </div>
                    </section>

                    <!-- –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã -->
                    <section class="form-section">
                        <h3>üí∞ –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="cell-income">–î–æ—Ö–æ–¥ ($)</label>
                                <input type="number" id="cell-income" placeholder="0" min="0">
                            </div>
                            <div class="form-group">
                                <label for="cell-expense">–†–∞—Å—Ö–æ–¥ ($)</label>
                                <input type="number" id="cell-expense" placeholder="0" min="0">
                            </div>
                            <div class="form-group">
                                <label for="cell-price">–¶–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏ ($)</label>
                                <input type="number" id="cell-price" placeholder="0" min="0">
                            </div>
                            <div class="form-group">
                                <label for="cell-rent">–†–µ–Ω—Ç–∞ ($)</label>
                                <input type="number" id="cell-rent" placeholder="0" min="0">
                            </div>
                        </div>
                    </section>

                    <!-- –î–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ -->
                    <section class="form-section">
                        <h3>‚ö° –î–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏</h3>
                        <div class="form-group">
                            <label for="cell-action-type">–¢–∏–ø –¥–µ–π—Å—Ç–≤–∏—è</label>
                            <select id="cell-action-type" class="form-select">
                                <option value="none">–ù–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è</option>
                                <option value="income">–ü–æ–ª—É—á–∏—Ç—å –¥–æ—Ö–æ–¥</option>
                                <option value="expense">–ó–∞–ø–ª–∞—Ç–∏—Ç—å —Ä–∞—Å—Ö–æ–¥</option>
                                <option value="property">–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å (–ø–æ–∫—É–ø–∫–∞/—Ä–µ–Ω—Ç–∞)</option>
                                <option value="card">–í–∑—è—Ç—å –∫–∞—Ä—Ç—É</option>
                                <option value="payday">–î–µ–Ω—å –∑–∞—Ä–ø–ª–∞—Ç—ã</option>
                                <option value="dream">–ö—É–ø–∏—Ç—å –º–µ—á—Ç—É</option>
                                <option value="chance">–®–∞–Ω—Å</option>
                                <option value="custom">–ö–∞—Å—Ç–æ–º–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="cell-action-text">–¢–µ–∫—Å—Ç –¥–µ–π—Å—Ç–≤–∏—è</label>
                            <textarea id="cell-action-text" rows="2" placeholder="–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ –Ω–∞ –∫–ª–µ—Ç–∫—É"></textarea>
                        </div>
                    </section>

                    <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
                    <section class="form-section">
                        <h3>‚öôÔ∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="cell-purchasable">
                                <span>–ú–æ–∂–Ω–æ –∫—É–ø–∏—Ç—å</span>
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="cell-special">
                                <span>–°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –∫–ª–µ—Ç–∫–∞</span>
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="cell-mandatory-stop">
                                <span>–û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞</span>
                            </label>
                        </div>
                    </section>

                    <!-- –ö–∞—Å—Ç–æ–º–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (JSON) -->
                    <section class="form-section">
                        <h3>üîß –ö–∞—Å—Ç–æ–º–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (JSON)</h3>
                        <div class="form-group full-width">
                            <label for="cell-custom-data">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (JSON)</label>
                            <textarea id="cell-custom-data" rows="5" placeholder='{"key": "value"}'></textarea>
                        </div>
                    </section>

                    <!-- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä -->
                    <section class="form-section">
                        <h3>üëÅÔ∏è –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</h3>
                        <div class="cell-preview" id="cell-preview">
                            <!-- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∫–ª–µ—Ç–∫–∏ -->
                        </div>
                    </section>
                </div>
            </main>
            </div>

            <!-- –°–µ–∫—Ü–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ -->
            <div id="cards-section" class="admin-section">
                <div class="cards-layout">
                    <aside class="cards-sidebar" id="cards-deck-list">
                        <!-- –°–ø–∏—Å–æ–∫ –∫–æ–ª–æ–¥ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </aside>
                    <main class="cards-editor" id="cards-editor">
                        <div class="empty-state">
                            <div class="empty-icon">üÉè</div>
                            <p>–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–æ–¥—É –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –∫–∞—Ä—Ç–æ—á–∫—É</p>
                        </div>
                    </main>
                </div>
            </div>

            <!-- –°–µ–∫—Ü–∏—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–π -->
            <div id="professions-section" class="admin-section">
                <div id="admin-content">
                    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–π –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –∑–¥–µ—Å—å -->
                </div>
            </div>

            <!-- –°–µ–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
            <div id="settings-section" class="admin-section">
                <div class="settings-content">
                    <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã</h2>
                    <p>–ó–¥–µ—Å—å –±—É–¥—É—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã...</p>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–º–ø–æ—Ä—Ç–∞ -->
        <div class="modal" id="import-modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>üìÇ –ò–º–ø–æ—Ä—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏</h3>
                    <button class="modal-close" onclick="adminEditor.closeImportModal()">‚úï</button>
                </div>
                <div class="modal-body">
                    <p>–í—Å—Ç–∞–≤—å—Ç–µ JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∫–ª–µ—Ç–æ–∫:</p>
                    <textarea id="import-json" rows="15" placeholder='{"cells": [...]}'></textarea>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="adminEditor.closeImportModal()">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-primary" onclick="adminEditor.processImport()">–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script src="../assets/js/modules/game/BoardConfig.js"></script>
    <script src="../assets/js/modules/ProfessionModule.js"></script>
    <script src="assets/js/AdminCellEditor.js"></script>
    <script src="assets/js/CardEditor.js"></script>
    <script src="assets/js/ProfessionEditor.js"></script>
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
        const adminEditor = new AdminCellEditor();
        window.adminEditor = adminEditor;
        let cardEditor = null;

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º
        document.querySelectorAll('.nav-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const section = btn.dataset.section;
                
                // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫ –∏ —Å–µ–∫—Ü–∏–π
                document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.admin-section').forEach(s => s.classList.remove('active'));
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–µ –∏ —Å–µ–∫—Ü–∏–∏
                btn.classList.add('active');
                document.getElementById(`${section}-section`).classList.add('active');
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä –ø—Ä–æ—Ñ–µ—Å—Å–∏–π –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
                if (section === 'professions') {
                    if (!window.professionEditor) {
                        window.professionEditor = new ProfessionEditor();
                    }
                } else if (section === 'cards') {
                    if (!cardEditor) {
                        cardEditor = new CardEditor();
                        window.cardEditor = cardEditor;
                    } else {
                        cardEditor.refresh();
                    }
                }
            });
        });
    </script>
</body>
</html>
