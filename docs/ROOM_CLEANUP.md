# üßπ –°–∏—Å—Ç–µ–º–∞ –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–∞—Ä—ã—Ö –∫–æ–º–Ω–∞—Ç

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∫–æ–º–Ω–∞—Ç —Å—Ç–∞—Ä—à–µ 5 —á–∞—Å–æ–≤.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç –∫–æ–º–Ω–∞—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ:
- –°–æ–∑–¥–∞–Ω—ã –±–æ–ª–µ–µ 5 —á–∞—Å–æ–≤ –Ω–∞–∑–∞–¥
- –ò–º–µ—é—Ç —Å—Ç–∞—Ç—É—Å –æ—Ç–ª–∏—á–Ω—ã–π –æ—Ç 'deleted'
- –°–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–∏–º–∏ –¥–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–æ–≤

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –æ—á–∏—Å—Ç–∫–∏

```bash
# –û–±—ã—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
./scripts/runCleanup.sh

# –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º (–Ω–µ —É–¥–∞–ª—è–µ—Ç –∫–æ–º–Ω–∞—Ç—ã)
./scripts/runCleanup.sh --dry-run

# –ü–æ–¥—Ä–æ–±–Ω—ã–π —Ä–µ–∂–∏–º
./scripts/runCleanup.sh --verbose

# –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º
./scripts/runCleanup.sh --dry-run --verbose
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ cron –∑–∞–¥–∞—á
./scripts/setupCleanupCron.sh
```

## üìä –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—á–∏—Å—Ç–∫–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|----------|
| `ROOM_MAX_AGE_HOURS` | 5 | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç –∫–æ–º–Ω–∞—Ç—ã –≤ —á–∞—Å–∞—Ö |
| –ò–Ω—Ç–µ—Ä–≤–∞–ª cron | 30 –º–∏–Ω—É—Ç | –ß–∞—Å—Ç–æ—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏ |
| –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ | 2:00 –µ–∂–µ–¥–Ω–µ–≤–Ω–æ | –ü–æ–¥—Ä–æ–±–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å –ª–æ–≥–∞–º–∏ |

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

- **–õ–æ–≥–∏ cron**: `logs/cleanup.log`
- **–†–µ–∂–∏–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**: `--dry-run`
- **–ü–æ–¥—Ä–æ–±–Ω—ã–π —Ä–µ–∂–∏–º**: `--verbose`

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

```bash
# –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫ Node.js —Å–∫—Ä–∏–ø—Ç–∞
node scripts/cleanupOldRooms.js

# –° –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
node scripts/cleanupOldRooms.js --dry-run --verbose
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ cron —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç:
- –ó–∞–ø—É—Å–∫–∞—Ç—å—Å—è –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
- –í—ã–ø–æ–ª–Ω—è—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—É—é –ø–æ–¥—Ä–æ–±–Ω—É—é –æ—á–∏—Å—Ç–∫—É –≤ 2:00
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å –ª–æ–≥–∏ –≤ `logs/cleanup.log`

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ cron

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö cron –∑–∞–¥–∞—á
crontab -l

# –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö cron –∑–∞–¥–∞—á
crontab -r
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –ª–æ–≥–æ–≤
tail -f logs/cleanup.log

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
grep "‚ùå" logs/cleanup.log
```

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–°–∫—Ä–∏–ø—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏:
- `rooms` - –æ—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∫–æ–º–Ω–∞—Ç
- `room_players` - –∏–≥—Ä–æ–∫–∏ –≤ –∫–æ–º–Ω–∞—Ç–∞—Ö

### –ü—Ä–æ—Ü–µ—Å—Å –æ—á–∏—Å—Ç–∫–∏

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç**: –ó–∞–ø—Ä–æ—Å –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç
2. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –û—Ç–±–æ—Ä –∫–æ–º–Ω–∞—Ç —Å—Ç–∞—Ä—à–µ 5 —á–∞—Å–æ–≤
3. **–£–¥–∞–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤**: –û—á–∏—Å—Ç–∫–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
4. **–ü–æ–º–µ—Ç–∫–∞ –∫–æ–º–Ω–∞—Ç—ã**: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ 'deleted'

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **–†–µ–∂–∏–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è
- **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**: –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞

```bash
# –°–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º–∏
chmod +x scripts/runCleanup.sh
chmod +x scripts/setupCleanupCron.sh
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
ls -la database/rooms.db

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü
sqlite3 database/rooms.db ".schema rooms"
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å cron

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ cron
sudo tail -f /var/log/cron

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
sudo grep "cleanup" /var/log/cron
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—á–∏—Å—Ç–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫–∏–µ –∫–æ–º–Ω–∞—Ç—ã –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã
./scripts/runCleanup.sh --dry-run --verbose
```

### –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞

```bash
# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö —Å—Ç–∞—Ä—ã—Ö –∫–æ–º–Ω–∞—Ç
node scripts/cleanupOldRooms.js --verbose
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

```bash
# –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤ –æ—á–∏—Å—Ç–∫–∏
tail -f logs/cleanup.log | grep -E "(‚úÖ|‚ùå|üìä)"
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ—á–∏—Å—Ç–∫–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `scripts/cleanupOldRooms.js`:

```javascript
const CONFIG = {
    ROOM_MAX_AGE_HOURS: 5, // –ò–∑–º–µ–Ω–∏—Ç—å –≤–æ–∑—Ä–∞—Å—Ç –∫–æ–º–Ω–∞—Ç
    DRY_RUN: false,        // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º
    VERBOSE: false         // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ –ø–æ–¥—Ä–æ–±–Ω—ã–π —Ä–µ–∂–∏–º
};
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ `logs/cleanup.log`
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ cron
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º
4. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ Node.js –∏ sqlite3

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∫–æ–º–Ω–∞—Ç —Å—Ç–∞—Ä—à–µ 5 —á–∞—Å–æ–≤.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç –∫–æ–º–Ω–∞—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ:
- –°–æ–∑–¥–∞–Ω—ã –±–æ–ª–µ–µ 5 —á–∞—Å–æ–≤ –Ω–∞–∑–∞–¥
- –ò–º–µ—é—Ç —Å—Ç–∞—Ç—É—Å –æ—Ç–ª–∏—á–Ω—ã–π –æ—Ç 'deleted'
- –°–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–∏–º–∏ –¥–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–æ–≤

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –æ—á–∏—Å—Ç–∫–∏

```bash
# –û–±—ã—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
./scripts/runCleanup.sh

# –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º (–Ω–µ —É–¥–∞–ª—è–µ—Ç –∫–æ–º–Ω–∞—Ç—ã)
./scripts/runCleanup.sh --dry-run

# –ü–æ–¥—Ä–æ–±–Ω—ã–π —Ä–µ–∂–∏–º
./scripts/runCleanup.sh --verbose

# –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º
./scripts/runCleanup.sh --dry-run --verbose
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ cron –∑–∞–¥–∞—á
./scripts/setupCleanupCron.sh
```

## üìä –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—á–∏—Å—Ç–∫–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|----------|
| `ROOM_MAX_AGE_HOURS` | 5 | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç –∫–æ–º–Ω–∞—Ç—ã –≤ —á–∞—Å–∞—Ö |
| –ò–Ω—Ç–µ—Ä–≤–∞–ª cron | 30 –º–∏–Ω—É—Ç | –ß–∞—Å—Ç–æ—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏ |
| –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ | 2:00 –µ–∂–µ–¥–Ω–µ–≤–Ω–æ | –ü–æ–¥—Ä–æ–±–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å –ª–æ–≥–∞–º–∏ |

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

- **–õ–æ–≥–∏ cron**: `logs/cleanup.log`
- **–†–µ–∂–∏–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**: `--dry-run`
- **–ü–æ–¥—Ä–æ–±–Ω—ã–π —Ä–µ–∂–∏–º**: `--verbose`

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

```bash
# –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫ Node.js —Å–∫—Ä–∏–ø—Ç–∞
node scripts/cleanupOldRooms.js

# –° –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
node scripts/cleanupOldRooms.js --dry-run --verbose
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ cron —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç:
- –ó–∞–ø—É—Å–∫–∞—Ç—å—Å—è –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
- –í—ã–ø–æ–ª–Ω—è—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—É—é –ø–æ–¥—Ä–æ–±–Ω—É—é –æ—á–∏—Å—Ç–∫—É –≤ 2:00
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å –ª–æ–≥–∏ –≤ `logs/cleanup.log`

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ cron

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö cron –∑–∞–¥–∞—á
crontab -l

# –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö cron –∑–∞–¥–∞—á
crontab -r
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –ª–æ–≥–æ–≤
tail -f logs/cleanup.log

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
grep "‚ùå" logs/cleanup.log
```

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–°–∫—Ä–∏–ø—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏:
- `rooms` - –æ—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∫–æ–º–Ω–∞—Ç
- `room_players` - –∏–≥—Ä–æ–∫–∏ –≤ –∫–æ–º–Ω–∞—Ç–∞—Ö

### –ü—Ä–æ—Ü–µ—Å—Å –æ—á–∏—Å—Ç–∫–∏

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç**: –ó–∞–ø—Ä–æ—Å –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç
2. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –û—Ç–±–æ—Ä –∫–æ–º–Ω–∞—Ç —Å—Ç–∞—Ä—à–µ 5 —á–∞—Å–æ–≤
3. **–£–¥–∞–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤**: –û—á–∏—Å—Ç–∫–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
4. **–ü–æ–º–µ—Ç–∫–∞ –∫–æ–º–Ω–∞—Ç—ã**: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ 'deleted'

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **–†–µ–∂–∏–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è
- **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**: –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞

```bash
# –°–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º–∏
chmod +x scripts/runCleanup.sh
chmod +x scripts/setupCleanupCron.sh
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
ls -la database/rooms.db

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü
sqlite3 database/rooms.db ".schema rooms"
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å cron

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ cron
sudo tail -f /var/log/cron

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
sudo grep "cleanup" /var/log/cron
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—á–∏—Å—Ç–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫–∏–µ –∫–æ–º–Ω–∞—Ç—ã –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã
./scripts/runCleanup.sh --dry-run --verbose
```

### –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞

```bash
# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö —Å—Ç–∞—Ä—ã—Ö –∫–æ–º–Ω–∞—Ç
node scripts/cleanupOldRooms.js --verbose
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

```bash
# –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤ –æ—á–∏—Å—Ç–∫–∏
tail -f logs/cleanup.log | grep -E "(‚úÖ|‚ùå|üìä)"
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ—á–∏—Å—Ç–∫–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `scripts/cleanupOldRooms.js`:

```javascript
const CONFIG = {
    ROOM_MAX_AGE_HOURS: 5, // –ò–∑–º–µ–Ω–∏—Ç—å –≤–æ–∑—Ä–∞—Å—Ç –∫–æ–º–Ω–∞—Ç
    DRY_RUN: false,        // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º
    VERBOSE: false         // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ –ø–æ–¥—Ä–æ–±–Ω—ã–π —Ä–µ–∂–∏–º
};
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ `logs/cleanup.log`
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ cron
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º
4. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ Node.js –∏ sqlite3
