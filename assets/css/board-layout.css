/* Верхняя информационная панель - только на мобильных устройствах */
.top-info-panel {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  display: none !important; /* По умолчанию скрыта */
  justify-content: space-between !important;
  align-items: center !important;
  padding: 0.75rem 1.5rem !important;
  background: rgba(17, 25, 40, 0.95) !important;
  border-bottom: 1px solid rgba(148, 163, 184, 0.2) !important;
  z-index: 1000 !important;
  backdrop-filter: blur(10px) !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2) !important;
}

/* Показываем верхнюю панель только на мобильных устройствах */
@media (max-width: 1024px) {
  .top-info-panel {
    display: flex !important;
    visibility: visible !important;
    opacity: 1 !important;
  }
}

.top-info-turn {
  display: flex !important;
  align-items: center !important;
  gap: 0.5rem !important;
}

.top-info-label {
  font-size: 0.875rem !important;
  color: rgba(248, 250, 252, 0.7) !important;
  font-weight: 500 !important;
}

.top-info-player-name {
  font-size: 1rem !important;
  font-weight: 700 !important;
  color: #fbbf24 !important;
}

.top-info-bank {
  display: flex !important;
  flex-direction: column !important;
  align-items: flex-end !important;
  gap: 0.25rem !important;
}

.top-info-bank-balance {
  font-size: 1.125rem !important;
  font-weight: 700 !important;
  color: #10b981 !important;
  line-height: 1.2 !important;
}

.top-info-bank-credit {
  font-size: 0.875rem !important;
  color: rgba(248, 250, 252, 0.7) !important;
  line-height: 1 !important;
}

.top-info-dice-timer {
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  gap: 0.25rem !important;
}

.top-info-dice {
  display: flex !important;
  align-items: center !important;
  gap: 0.25rem !important;
}

.top-info-dice-icon {
  font-size: 1rem !important;
}

.top-info-dice-value {
  font-size: 1rem !important;
  font-weight: 700 !important;
  color: #fbbf24 !important;
  min-width: 1.5rem !important;
  text-align: center !important;
}

.top-info-timer {
  display: flex !important;
  align-items: center !important;
  gap: 0.25rem !important;
}

.top-info-timer-icon {
  font-size: 0.875rem !important;
}

.top-info-timer-value {
  font-size: 0.875rem !important;
  font-weight: 600 !important;
  color: #10b981 !important;
  font-variant-numeric: tabular-nums !important;
  min-width: 2.5rem !important;
  text-align: center !important;
}

/* Панель кубика и таймера для десктопа (только на десктопе) */
.desktop-dice-timer-panel {
  display: none !important; /* По умолчанию скрыта */
  flex-direction: row !important;
  justify-content: space-between !important;
  align-items: center !important;
  gap: 1rem !important;
  padding: 0.75rem 1rem !important;
  margin-bottom: 0.75rem !important;
  background: rgba(17, 25, 40, 0.6) !important;
  border: 1px solid rgba(148, 163, 184, 0.2) !important;
  border-radius: 8px !important;
  backdrop-filter: blur(10px) !important;
  width: 100% !important;
  box-sizing: border-box !important;
}

.desktop-dice-info {
  display: flex !important;
  align-items: center !important;
  gap: 0.5rem !important;
  flex: 1 !important;
}

.desktop-dice-icon {
  font-size: 1.25rem !important;
}

.desktop-dice-value {
  font-size: 1.125rem !important;
  font-weight: 700 !important;
  color: #fbbf24 !important;
  min-width: 1.5rem !important;
  text-align: center !important;
}

.desktop-timer-info {
  display: flex !important;
  align-items: center !important;
  gap: 0.5rem !important;
  flex: 1 !important;
  justify-content: flex-end !important;
}

.desktop-timer-icon {
  font-size: 1rem !important;
}

.desktop-timer-value {
  font-size: 1rem !important;
  font-weight: 600 !important;
  color: #10b981 !important;
  font-variant-numeric: tabular-nums !important;
  min-width: 2.5rem !important;
  text-align: center !important;
}

/* Desktop: трехколоночная раскладка, поле по центру квадратом */
@media (min-width: 1025px) {
  /* Скрываем верхнюю информационную панель на десктопе */
  #top-info-panel,
  .top-info-panel {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
  }
  
  /* Показываем панель кубика и таймера для десктопа */
  .desktop-dice-timer-panel {
    display: flex !important;
    visibility: visible !important;
    opacity: 1 !important;
  }
  
  /* Скрываем ВСЕ мобильные элементы на десктоп версии - максимальная специфичность и агрессивное скрытие */
  nav.mobile-bottom-menu,
  .mobile-bottom-menu,
  .mobile-bottom-nav,
  .mobile-turn-controls,
  .mobile-bottom-menu-item,
  .mobile-bottom-nav-btn,
  #mobile-bottom-roll-btn,
  #mobile-bottom-pass-btn,
  #mobile-bank-menu-btn,
  #mobile-menu-bottom-btn,
  #mobile-bottom-bank-btn,
  #mobile-bottom-menu-btn,
  .mobile-bottom-nav-icon,
  .mobile-bottom-nav-label,
  nav.mobile-bottom-menu *,
  .mobile-bottom-menu *,
  .mobile-bottom-menu-item *,
  button.mobile-bottom-menu-item,
  #game-page nav.mobile-bottom-menu,
  #game-page .mobile-bottom-menu,
  .game-page nav.mobile-bottom-menu,
  .game-page .mobile-bottom-menu,
  body nav.mobile-bottom-menu,
  body .mobile-bottom-menu,
  /* Скрываем мобильные кнопки управления */
  .mobile-control-btn,
  #mobile-bank-btn,
  #mobile-turn-info-btn,
  .mobile-bank-btn,
  .mobile-turn-info-btn,
  /* Скрываем мобильные информационные блоки */
  .mobile-bank-info,
  .mobile-bank-balance,
  .mobile-bank-credit,
  .mobile-turn-info,
  .mobile-turn-label-text,
  .mobile-turn-player-name,
  .mobile-btn-icon,
  #mobile-bank-balance,
  #mobile-bank-credit,
  #mobile-turn-player-name,
  /* Скрываем кнопку переключения меню */
  #toggle-menu-btn,
  .toggle-menu-btn,
  .toggle-menu-icon {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    height: 0 !important;
    width: 0 !important;
    max-height: 0 !important;
    max-width: 0 !important;
    min-height: 0 !important;
    min-width: 0 !important;
    overflow: hidden !important;
    position: fixed !important;
    left: -9999px !important;
    top: -9999px !important;
    right: -9999px !important;
    bottom: -9999px !important;
    pointer-events: none !important;
    margin: 0 !important;
    padding: 0 !important;
    border: none !important;
    font-size: 0 !important;
    line-height: 0 !important;
    z-index: -1 !important;
    background: transparent !important;
    box-shadow: none !important;
    backdrop-filter: none !important;
  }
  
  #game-page,
  .game-page {
    display: grid !important;
    /* Левая панель: auto (занимает необходимое место), Центр (поле): квадрат, Правая панель: auto */
    grid-template-columns: auto 1fr auto !important;
    grid-template-rows: 1fr !important;
    grid-template-areas: "card-decks game-board players-panel" !important;
    gap: 1rem !important;
    align-items: center !important; /* ИСПРАВЛЕНО: Центрируем по вертикали */
    justify-items: center !important; /* ИСПРАВЛЕНО: Центрируем по горизонтали */
    padding: 0.5rem !important;
    max-width: 100% !important;
    margin: 0 auto !important;
    min-height: 100vh !important;
    height: 100vh !important;
    max-height: 100vh !important; /* Фиксируем высоту */
    overflow: hidden !important;
    background: rgba(15, 23, 42, 0.95) !important; /* Единственная подложка */
    /* Предотвращаем изменение размеров после загрузки */
    box-sizing: border-box !important;
    position: relative !important;
  }
  
  /* Левая панель: карточки сделок и банк - GRID СЕТКА с фиксированными размерами */
  #card-decks-panel.card-decks-container {
    grid-area: card-decks !important;
    display: grid !important;
    grid-template-rows: auto 1fr !important; /* Банк фиксирован, карточки растягиваются */
    grid-template-columns: 1fr !important;
    grid-template-areas: 
      "bank"
      "cards" !important;
    visibility: visible !important;
    opacity: 1 !important;
    min-width: 280px !important; /* Минимальная ширина */
    max-width: 320px !important; /* Максимальная ширина */
    width: auto !important; /* Занимает необходимое место */
    min-height: 0 !important; /* Позволяет сжиматься в grid */
    height: 100% !important; /* На всю высоту */
    max-height: 100% !important;
    position: relative !important;
    transform: none !important;
    background: transparent !important; /* Убираем подложку */
    border-right: 2px solid rgba(148, 163, 184, 0.3) !important;
    padding: 1rem !important;
    box-sizing: border-box !important;
    z-index: 1 !important;
    overflow: hidden !important; /* Убираем прокрутку у контейнера */
    gap: 1rem !important; /* Отступ между банком и карточками */
    /* Предотвращаем изменение размеров после загрузки */
    contain: layout size !important; /* Изоляция layout */
  }
  
  /* Карточки сделок: компактные, чтобы все помещались */
  #card-decks-panel.card-decks-container .card-deck-card,
  #card-decks-panel .card-deck-card {
    flex: 0 0 auto !important; /* Не растягиваются */
    width: 100% !important;
    max-width: 100% !important; /* Не выходят за границы панели */
    min-width: 0 !important;
    padding: 0.5rem !important;
    box-sizing: border-box !important;
  }
  
  /* Заголовки/метрики в карточках — компактнее */
  #card-decks-panel .card-deck-title { 
    font-size: 0.95rem !important; 
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  #card-decks-panel .card-deck-subtitle { 
    font-size: 0.85rem !important; 
    overflow: hidden;
    text-overflow: ellipsis;
  }
  #card-decks-panel .deck-metric { 
    transform: scale(0.95); 
    transform-origin: left center; 
  }
  
  /* Центральная область: игровое поле - СТРОГО КВАДРАТНЫЙ контейнер */
  .game-board-container {
    grid-area: game-board !important;
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    min-width: 0 !important; /* Позволяет сжиматься в grid */
    min-height: 0 !important;
    /* ИСПРАВЛЕНО: Делаем строго квадратным - используем меньшую сторону доступного пространства */
    /* Размер определяется по меньшей стороне (ширина или высота grid-ячейки) */
    /* Используем aspect-ratio для квадратной формы, размер будет автоматически вычислен */
    aspect-ratio: 1 / 1 !important;
    /* Ширина и высота будут вычислены автоматически на основе aspect-ratio и доступного пространства */
    width: auto !important;
    height: auto !important;
    /* Ограничиваем максимальный размер по меньшей стороне экрана */
    max-width: min(100%, calc(100vh - 2rem)) !important;
    max-height: min(100%, calc(100vh - 2rem)) !important;
    /* Минимальный размер для обеспечения видимости */
    min-width: 300px !important;
    min-height: 300px !important;
    padding: 0.5rem !important;
    box-sizing: border-box !important;
    overflow: hidden !important; /* Скрываем переполнение */
    position: relative !important;
    /* Предотвращаем изменение размеров после загрузки */
    flex: 0 0 auto !important; /* Не растягивается, использует aspect-ratio */
    /* Фиксируем позицию для предотвращения сдвига */
    margin: auto !important; /* Центрирование */
    /* Переопределяем все возможные конфликтующие правила */
    flex-grow: 0 !important;
    flex-shrink: 0 !important;
    flex-basis: auto !important;
  }
  
  /* Квадратная доска - фиксированные размеры для предотвращения сдвига */
  .game-page .board-wrapper {
    width: 100% !important;
    height: 100% !important;
    aspect-ratio: 1 / 1 !important; /* Всегда квадрат */
    margin: 0 auto !important; /* Центрирование по горизонтали */
    max-width: 100% !important;
    max-height: 100% !important;
    min-width: 0 !important;
    min-height: 0 !important;
    box-sizing: border-box !important;
    position: relative !important;
    /* Предотвращаем изменение размеров после загрузки */
    flex: 0 0 auto !important; /* Не растягивается, использует aspect-ratio */
    overflow: visible !important; /* Разрешаем видимость для центрирования */
    /* Фиксируем позицию для предотвращения сдвига */
    left: 0 !important;
    right: 0 !important;
    top: 0 !important;
    bottom: 0 !important;
    /* Гарантируем центрирование */
    display: block !important;
  }
  
  /* Треки внутри доски - не влияют на размеры контейнера */
  .game-page .board-wrapper .track {
    position: absolute !important;
    width: 100% !important;
    height: 100% !important;
    pointer-events: none !important; /* Клетки обрабатывают события */
  }
  
  /* Внешний трек - центрирование относительно лого (как и внутренний трек) - максимальная специфичность */
  .game-page .board-wrapper .outer-track,
  .game-page .board-wrapper #outer-track,
  #game-page .board-wrapper .outer-track,
  #game-page .board-wrapper #outer-track,
  .game-board-container .board-wrapper .outer-track,
  .game-board-container .board-wrapper #outer-track {
    width: 100% !important;
    height: 100% !important;
    position: absolute !important;
    top: 50% !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important; /* Точное центрирование относительно лого */
    margin: 0 !important;
    padding: 0 !important;
    box-sizing: border-box !important;
    aspect-ratio: 1 / 1 !important;
    right: auto !important;
    bottom: auto !important;
    /* Гарантируем, что внешний круг центрирован относительно того же центра, что и лого */
    transform-origin: center center !important;
    /* Фиксируем позицию - предотвращаем сдвиг при загрузке */
    will-change: transform !important;
    backface-visibility: hidden !important;
    /* Запрещаем изменение позиции через JavaScript */
    pointer-events: none !important;
  }
  
  /* Разрешаем pointer-events только для клеток внутри внешнего трека */
  .game-page .board-wrapper .outer-track .track-cell,
  .game-page .board-wrapper #outer-track .track-cell,
  #game-page .board-wrapper .outer-track .track-cell,
  #game-page .board-wrapper #outer-track .track-cell {
    pointer-events: auto !important;
  }
  
  /* Внутренний трек - центрирование */
  .game-page .board-wrapper .inner-track,
  .game-page .board-wrapper #inner-track {
    width: 80% !important;
    height: 80% !important;
    position: absolute !important;
    top: 50% !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important;
    transform-origin: center center !important; /* Гарантируем центрирование относительно центра */
    margin: 0 !important;
    padding: 0 !important;
    box-sizing: border-box !important;
    aspect-ratio: 1 / 1 !important;
    border-radius: 50% !important;
    /* Фиксируем позицию для предотвращения сдвига */
    will-change: transform !important;
    backface-visibility: hidden !important;
  }
  
  /* Центральная область и логотип - идеальное центрирование */
  .game-page .board-wrapper .center-area,
  .game-page .board-wrapper #center-area,
  #game-page .board-wrapper .center-area,
  #game-page .board-wrapper #center-area {
    position: absolute !important;
    top: 50% !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important;
    transform-origin: center center !important;
    z-index: 10 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    width: 200px !important;
    height: 200px !important;
    margin: 0 !important;
    padding: 0 !important;
    pointer-events: none !important;
    will-change: transform !important;
    backface-visibility: hidden !important;
  }
  
  .game-page .board-wrapper .logo-center,
  .game-page .board-wrapper #logo-center,
  #game-page .board-wrapper .logo-center,
  #game-page .board-wrapper #logo-center {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    z-index: 2 !important;
    position: relative !important;
    width: 100% !important;
    height: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
  }
  
  /* Клетки - абсолютное позиционирование, не влияют на размеры */
  .game-page .board-wrapper .track-cell {
    position: absolute !important;
    /* Размеры задаются через CSS переменные или классы */
    box-sizing: border-box !important;
  }
  
  /* Фишки игроков должны быть видны на десктоп версии - максимальная специфичность */
  .game-page .board-wrapper .outer-track .player-token,
  .game-page .board-wrapper .inner-track .player-token,
  .game-page .board-wrapper #outer-track .player-token,
  .game-page .board-wrapper #inner-track .player-token,
  #game-page .board-wrapper .outer-track .player-token,
  #game-page .board-wrapper .inner-track .player-token,
  #game-page .board-wrapper #outer-track .player-token,
  #game-page .board-wrapper #inner-track .player-token,
  .game-board-container .board-wrapper .outer-track .player-token,
  .game-board-container .board-wrapper .inner-track .player-token,
  .game-board-container .board-wrapper #outer-track .player-token,
  .game-board-container .board-wrapper #inner-track .player-token,
  .board-wrapper .player-token,
  .outer-track .player-token,
  .inner-track .player-token,
  #outer-track .player-token,
  #inner-track .player-token,
  [id^="token-"],
  div.player-token {
    display: flex !important;
    visibility: visible !important;
    opacity: 1 !important;
    z-index: 99999 !important; /* МАКСИМАЛЬНЫЙ z-index - фишки поверх ВСЕГО */
    pointer-events: auto !important;
    position: absolute !important;
    width: 36px !important;
    height: 36px !important;
    min-width: 36px !important;
    min-height: 36px !important;
    max-width: 36px !important;
    max-height: 36px !important;
    transform: translateZ(0) !important; /* Создаем новый stacking context */
    isolation: isolate !important; /* Изолируем stacking context */
  }
  
  /* Правая панель: игроки - GRID СЕТКА с фиксированными размерами */
  .top-panel-container {
    grid-area: players-panel !important;
    display: grid !important;
    grid-template-rows: auto 1fr !important; /* Действия фиксированы, игроки растягиваются */
    grid-template-columns: 1fr !important;
    grid-template-areas: 
      "actions"
      "players" !important;
    visibility: visible !important;
    opacity: 1 !important;
    min-width: 320px !important; /* Минимальная ширина */
    max-width: 100% !important; /* На всю ширину */
    width: 100% !important; /* Занимает всю доступную ширину */
    min-height: 0 !important;
    height: 100% !important; /* На всю высоту */
    max-height: 100% !important;
    position: relative !important;
    transform: none !important;
    background: transparent !important; /* Убираем подложку */
    border-left: 2px solid rgba(148, 163, 184, 0.3) !important;
    padding: 0.5rem !important; /* Уменьшаем отступы */
    box-sizing: border-box !important;
    z-index: 1 !important;
    overflow: hidden !important; /* Убираем прокрутку у контейнера */
    gap: 0.5rem !important; /* Уменьшаем отступ между действиями и игроками */
    /* Предотвращаем изменение размеров после загрузки */
    contain: layout size !important; /* Изоляция layout */
  }
  
  /* Секция действий - GRID область */
  .top-panel-container .actions-section,
  #players-panel .actions-section {
    grid-area: actions !important;
    display: flex !important;
    flex-direction: column !important;
    width: 100% !important;
    max-width: 100% !important;
    min-width: 0 !important;
    box-sizing: border-box !important;
    overflow: visible !important;
    background: transparent !important; /* Убираем подложку */
    padding: 0 !important; /* Убираем внутренние отступы */
  }
  
  /* Секция игроков - GRID область */
  .players-panel-container,
  #players-panel.top-panel-content {
    grid-area: players !important;
    display: flex !important;
    flex-direction: column !important;
    width: 100% !important;
    max-width: 100% !important;
    min-width: 0 !important;
    height: 100% !important;
    min-height: 0 !important;
    overflow-y: auto !important; /* Прокрутка списка игроков */
    overflow-x: hidden !important;
    gap: 1rem !important;
    background: transparent !important; /* Убираем подложку */
    padding: 0 !important; /* Убираем внутренние отступы */
  }
  
  /* Скрываем секцию "Активный игрок" на десктопе */
  .active-player-widget,
  #players-panel .active-player-widget {
    display: none !important;
  }
  
  /* Секция действий на всю ширину */
  .actions-section,
  #players-panel .actions-section,
  .top-panel-content .actions-section {
    width: 100% !important;
    max-width: 100% !important;
    min-width: 0 !important;
    box-sizing: border-box !important;
  }
  
  /* Кнопки действий на всю ширину */
  .actions-section .action-button,
  .actions-section button,
  .actions-section .btn {
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
  }
  
  /* Банк на десктопе: внутри левой панели (сверху) - GRID */
  #card-decks-panel #bank-section {
    grid-area: bank !important;
    display: flex !important;
    flex-direction: column !important;
    width: 100% !important;
    max-width: 100% !important;
    min-width: 0 !important;
    padding: 0 !important;
    box-sizing: border-box !important;
    border-bottom: 2px solid rgba(148, 163, 184, 0.3) !important;
    overflow: visible !important;
  }
  
  /* Внутренний контейнер для карточек - GRID область */
  #card-decks-panel .card-decks-inner {
    grid-area: cards !important;
    display: flex !important;
    flex-direction: column !important;
    gap: 0.5rem !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    min-height: 0 !important;
    width: 100% !important;
    max-width: 100% !important;
  }
  
  /* Карточки после банка - все вместе внизу */
  #card-decks-panel .card-deck-card {
    width: 100% !important;
    max-width: 100% !important;
    min-width: 0 !important;
    box-sizing: border-box !important;
    flex: 0 0 auto !important; /* Карточки не растягиваются */
  }
  
  #bank-preview-container {
    width: 100% !important;
    max-width: 100% !important;
    min-width: 0 !important;
    box-sizing: border-box !important;
  }
}

/* Mobile/tablet: вертикальная компоновка: игроки → поле → банк → колоды */
@media (max-width: 1024px) {
  /* На мобильной версии скрываем все кроме игрового поля и мобильных элементов управления */
  #card-decks-panel,
  #card-decks-panel *,
  .card-decks-container,
  .card-decks-container *,
  #bank-section,
  #bank-section *,
  #bank-preview-container,
  #bank-preview-container *,
  .top-panel-container,
  .top-panel-container *,
  #players-panel,
  #players-panel *,
  #players-list-container,
  #players-list-container *,
  .toggle-menu-btn,
  .toggle-menu-btn * {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
  }
  
  /* Фишки игроков должны быть видны на мобильной версии */
  .outer-track .player-token,
  .inner-track .player-token,
  #outer-track .player-token,
  #inner-track .player-token,
  .board-wrapper .player-token,
  [id^="token-"] {
    display: flex !important;
    visibility: visible !important;
    opacity: 1 !important;
    z-index: 50000 !important;
    pointer-events: auto !important;
    position: absolute !important;
    width: 32px !important;
    height: 32px !important;
    min-width: 32px !important;
    min-height: 32px !important;
  }
  
  /* Показываем мобильные элементы управления на мобильной версии */
  .mobile-control-btn,
  .mobile-bottom-menu {
    display: flex !important;
    visibility: visible !important;
    opacity: 1 !important;
  }
  
  /* Игровое поле по центру экрана на мобильной версии */
  #game-page,
  .game-page {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    width: 100vw !important;
    height: 100vh !important;
    padding: 0 !important;
    margin: 0 !important;
    overflow: hidden !important;
    background: rgba(15, 23, 42, 0.95) !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    z-index: 1 !important;
  }
  
  .game-board-container {
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    width: 100vw !important;
    height: 100vh !important;
    padding: 0 !important;
    box-sizing: border-box !important;
    overflow: hidden !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    margin: 0 !important;
  }
  
  .game-page .board-wrapper {
    width: min(100vw, 100vh) !important; /* Строго квадрат по меньшей стороне экрана */
    height: min(100vw, 100vh) !important;
    margin: auto !important; /* Центрирование */
    box-sizing: border-box !important;
    position: absolute !important;
    top: 50% !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important; /* Точное центрирование */
    overflow: visible !important;
    /* Гарантируем идеальный квадрат */
    padding: 0 !important;
    border: none !important;
    aspect-ratio: 1 / 1 !important;
    /* Фиксируем размеры для строгого квадрата */
    min-width: min(100vw, 100vh) !important;
    min-height: min(100vw, 100vh) !important;
    max-width: min(100vw, 100vh) !important;
    max-height: min(100vw, 100vh) !important;
  }
  
  /* Внешний трек - идеальный квадрат, строго по центру относительно лого */
  .game-page .board-wrapper .outer-track,
  .game-page .board-wrapper #outer-track {
    width: 100% !important;
    height: 100% !important;
    position: absolute !important;
    top: 50% !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important; /* Точное центрирование относительно лого */
    transform-origin: center center !important; /* Гарантируем центрирование относительно центра */
    margin: 0 !important;
    padding: 0 !important;
    box-sizing: border-box !important;
    aspect-ratio: 1 / 1 !important;
  }
  
  /* Внутренний трек - идеальный круг, строго по центру квадрата */
  .game-page .board-wrapper .inner-track,
  .game-page .board-wrapper #inner-track {
    width: 80% !important;
    height: 80% !important;
    position: absolute !important;
    top: 50% !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important;
    margin: 0 !important;
    padding: 0 !important;
    box-sizing: border-box !important;
    aspect-ratio: 1 / 1 !important;
    border-radius: 50% !important; /* Делаем идеальный круг */
  }
  
  /* Скрываем центральный логотип и другие элементы внутри поля на мобильной версии */
  .game-page .board-wrapper .center-area,
  .game-page .board-wrapper .logo-center,
  .game-page .board-wrapper #logo-center,
  .game-page .board-wrapper .center-logo,
  .game-page .board-wrapper #center-logo {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
  }
  
  /* Мобильные элементы управления - скрыты на десктопе, показываются только на мобильной версии */
  /* Правила для мобильных элементов определены ниже в @media (max-width: 1024px) */
  
  /* Показываем мобильные элементы на мобильной версии */
  @media (max-width: 1024px) {
    .mobile-control-btn,
    .mobile-turn-controls {
      display: flex !important;
      visibility: visible !important;
      opacity: 1 !important;
    }
    
  }
  
  .mobile-control-btn:active {
    transform: scale(0.95) !important;
    background: rgba(99, 102, 241, 0.2) !important;
  }
  
  .mobile-menu-btn {
    top: 1rem !important;
    right: 1rem !important;
    width: 56px !important;
    height: 56px !important;
    justify-content: center !important;
    padding: 0 !important;
    z-index: 10001 !important; /* Выше чем меню, чтобы всегда была доступна */
  }
  
  .mobile-menu-btn.active {
    background: rgba(239, 68, 68, 0.2) !important;
    border-color: rgba(239, 68, 68, 0.5) !important;
  }
  
  .mobile-menu-btn.active .mobile-btn-icon::before {
    content: '✕' !important;
  }
  
  .mobile-bank-btn {
    top: 1rem !important;
    left: 1rem !important;
    min-width: 140px !important;
    padding: 0.75rem 1rem !important;
  }
  
  .mobile-turn-info-btn {
    top: 1rem !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    min-width: 140px !important;
    padding: 0.75rem 1rem !important;
  }
  
  .mobile-turn-info {
    display: flex !important;
    flex-direction: column !important;
    gap: 0.25rem !important;
    align-items: flex-start !important;
  }
  
  .mobile-turn-label-text {
    font-size: 0.75rem !important;
    color: rgba(248, 250, 252, 0.7) !important;
    line-height: 1 !important;
  }
  
  .mobile-turn-player-name {
    font-size: 1rem !important;
    font-weight: 700 !important;
    color: #fbbf24 !important;
    line-height: 1.2 !important;
  }
  
  .mobile-btn-icon {
    font-size: 1.75rem !important;
    line-height: 1 !important;
  }
  
  .mobile-bank-info {
    display: flex !important;
    flex-direction: column !important;
    gap: 0.25rem !important;
    align-items: flex-start !important;
  }
  
  .mobile-bank-balance {
    font-size: 1.25rem !important;
    font-weight: 700 !important;
    color: #10b981 !important;
    line-height: 1.2 !important;
  }
  
  .mobile-bank-credit {
    font-size: 0.875rem !important;
    color: rgba(248, 250, 252, 0.7) !important;
    line-height: 1 !important;
  }
  
  /* Нижнее меню в стиле навигации */
  .mobile-bottom-menu {
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    width: 100% !important;
    display: flex !important;
    justify-content: space-around !important;
    align-items: center !important;
    background: rgba(17, 25, 40, 0.98) !important;
    border-top: 1px solid rgba(148, 163, 184, 0.2) !important;
    padding: 0.5rem 0 !important;
    padding-bottom: max(0.5rem, env(safe-area-inset-bottom)) !important;
    z-index: 1000 !important;
    box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.3) !important;
    backdrop-filter: blur(10px) !important;
  }
  
  .mobile-bottom-menu-item {
    flex: 1 !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 0.25rem !important;
    padding: 0.75rem 0.5rem !important;
    background: transparent !important;
    border: none !important;
    border-radius: 8px !important;
    color: rgba(248, 250, 252, 0.6) !important;
    font-size: 0.75rem !important;
    font-weight: 500 !important;
    cursor: pointer !important;
    transition: all 0.2s ease !important;
    min-width: 0 !important;
  }
  
  .mobile-bottom-menu-item:disabled {
    opacity: 0.4 !important;
    cursor: not-allowed !important;
  }
  
  .mobile-bottom-menu-item:not(:disabled):active {
    background: rgba(99, 102, 241, 0.1) !important;
    color: rgba(248, 250, 252, 0.9) !important;
  }
  
  .mobile-bottom-menu-item.active {
    color: #6366f1 !important;
  }
  
  .mobile-bottom-menu-icon {
    font-size: 1.5rem !important;
    line-height: 1 !important;
    display: block !important;
  }
  
  .mobile-bottom-menu-label {
    font-size: 0.7rem !important;
    line-height: 1.2 !important;
    text-align: center !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
  }
  
  /* Специальные стили для активных кнопок */
  .mobile-roll-btn:not(:disabled) {
    color: rgba(16, 185, 129, 0.8) !important;
  }
  
  .mobile-roll-btn:not(:disabled).active {
    color: #10b981 !important;
  }
  
  .mobile-pass-btn:not(:disabled) {
    color: rgba(99, 102, 241, 0.8) !important;
  }
  
  .mobile-pass-btn:not(:disabled).active {
    color: #6366f1 !important;
  }
  
  /* Старые классы для совместимости - скрываем */
  .mobile-turn-controls {
    display: none !important;
  }
  
  .mobile-turn-btn {
    display: none !important;
  }
  
  /* Банк на весь экран на мобильной версии */
  .bank-module {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    z-index: 10000 !important;
    background: rgba(15, 23, 42, 0.98) !important;
    overflow-y: auto !important;
  }
  
  /* Показываем панели при открытом меню */
  #card-decks-panel.menu-visible,
  .top-panel-container.menu-visible {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    z-index: 10000 !important;
    background: rgba(15, 23, 42, 0.98) !important;
    overflow-y: auto !important;
    padding: 1rem !important;
    box-sizing: border-box !important;
  }
  
  #card-decks-panel.menu-visible *,
  .top-panel-container.menu-visible * {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
  }
  
  /* В меню показываем карточки сделок */
  #card-decks-panel.menu-visible .card-decks-inner,
  #card-decks-panel.menu-visible .card-deck-card {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    width: 100% !important;
    margin-bottom: 1rem !important;
  }
  
  #card-decks-panel.menu-visible .card-decks-inner {
    display: flex !important;
    flex-direction: column !important;
    gap: 1rem !important;
    padding: 1rem 0 !important;
  }
  
  #card-decks-panel.menu-visible .card-deck-card {
    background: rgba(17, 25, 40, 0.95) !important;
    border: 2px solid rgba(99, 102, 241, 0.3) !important;
    border-radius: 12px !important;
    padding: 1rem !important;
    cursor: pointer !important;
    transition: all 0.2s ease !important;
  }
  
  #card-decks-panel.menu-visible .card-deck-card:active {
    transform: scale(0.98) !important;
    background: rgba(99, 102, 241, 0.2) !important;
  }
  
  /* Кнопка меню всегда видна, даже когда меню открыто */
  .mobile-menu-btn {
    position: fixed !important;
    z-index: 10001 !important; /* Выше меню */
  }
}
  
  /* Показываем только внешний и внутренний треки */
  .game-page .board-wrapper .outer-track,
  .game-page .board-wrapper .inner-track,
  .game-page .board-wrapper #outer-track,
  .game-page .board-wrapper #inner-track {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
  }
  
  /* Убираем все отступы у родительских контейнеров на мобиле */
  .app-content,
  #page-container {
    padding: 0 !important;
    margin: 0 !important;
    width: 100% !important;
    max-width: 100% !important;
  }
}



