# üîç –û—Ç—á–µ—Ç –ø–æ –∞—É–¥–∏—Ç—É –∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏–∫–∏

## üìä –û–±–∑–æ—Ä –ø—Ä–æ–±–ª–µ–º

–ü—Ä–æ–≤–µ–¥–µ–Ω –ø–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç –∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏–∫–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π, –∏–∑–±—ã—Ç–æ—á–Ω–æ–≥–æ –∫–æ–¥–∞ –∏ –Ω–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. **–î–£–ë–õ–ò–†–û–í–ê–ù–ò–ï –ú–û–î–£–õ–ï–ô**

#### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ–ª–Ω–æ–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–∂–¥—É –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –º–æ–¥—É–ª—è–º–∏ –∏ micromodules

**–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏:**
- `BankModuleServer` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω
- `PlayersPanel` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω  
- `GameStateManager` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω
- `BoardLayout` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω
- `CardDeckPanel` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω
- `TurnController` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω

**–†–∞–∑–º–µ—Ä –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è:**
- `BankModuleServer.js`: 1654 —Å—Ç—Ä–æ–∫–∏ (–æ—Å–Ω–æ–≤–Ω–æ–π) vs 1654 —Å—Ç—Ä–æ–∫–∏ (micromodule)
- `PlayersPanel.js`: 3653 —Å—Ç—Ä–æ–∫–∏ (–æ—Å–Ω–æ–≤–Ω–æ–π) vs 3653 —Å—Ç—Ä–æ–∫–∏ (micromodule)
- `GameStateManager.js`: 936 —Å—Ç—Ä–æ–∫ (–æ—Å–Ω–æ–≤–Ω–æ–π) vs 936 —Å—Ç—Ä–æ–∫ (micromodule)

**–û–±—â–∏–π –æ–±—ä–µ–º –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞: ~15,000+ —Å—Ç—Ä–æ–∫**

### 2. **–î–£–ë–õ–ò–†–û–í–ê–ù–ò–ï –§–£–ù–ö–¶–ò–ô**

#### BankModule vs BankModuleServer
- `initCurrentUser()` - –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è
- `_getCurrentRoomId()` - –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è
- `updateBankData()` - –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è
- `getCurrentUserPlayer()` - –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è
- `loadPlayers()` - –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è

#### PlayersPanel
- `loadPlayersViaGameStateManager()` - –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è 6 —Ä–∞–∑ –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö
- `updateFromGameState()` - –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞
- `forceUpdate()` - –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞

### 3. **–ò–ó–ë–´–¢–û–ß–ù–´–ô –ö–û–î**

#### –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- `forceLoadPlayers()` - –ø–æ–º–µ—á–µ–Ω–∞ –∫–∞–∫ deprecated
- `loadPlayersViaGameStateManager()` - –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –≤—ã–∑–æ–≤—ã
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ `setTimeout` —Å –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π –ª–æ–≥–∏–∫–æ–π

#### –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –∏–º–µ–µ—Ç —Å–≤–æ–π `init()` –º–µ—Ç–æ–¥
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è roomId

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é

### 1. **–£–°–¢–†–ê–ù–ï–ù–ò–ï –î–£–ë–õ–ò–†–û–í–ê–ù–ò–Ø –ú–û–î–£–õ–ï–ô**

#### –í–∞—Ä–∏–∞–Ω—Ç A: –£–¥–∞–ª–∏—Ç—å micromodules (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
# –£–¥–∞–ª–∏—Ç—å –≤—Å–µ micromodules
rm -rf micromodules/
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ micromodules
```bash
# –ó–∞–º–µ–Ω–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏ –Ω–∞ micromodules
mv micromodules/*/src/*.js assets/js/modules/game/
rm -rf micromodules/
```

### 2. **–ö–û–ù–°–û–õ–ò–î–ê–¶–ò–Ø –§–£–ù–ö–¶–ò–ô**

#### –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –æ–±—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π
```javascript
class BaseModule {
    constructor(config = {}) {
        this.gameState = config.gameState || null;
        this.eventBus = config.eventBus || null;
        this.currentUserId = null;
        this.currentRoomId = null;
    }
    
    initCurrentUser() {
        // –û–±—â–∞—è –ª–æ–≥–∏–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    }
    
    getCurrentRoomId() {
        // –û–±—â–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è roomId
    }
}
```

### 3. **–û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò**

#### –£–±—Ä–∞—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –≤—ã–∑–æ–≤—ã
- –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ `setTimeout`
- –ö–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å `forceUpdate` –º–µ—Ç–æ–¥—ã
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å `loadPlayersViaGameStateManager`

### 4. **–û–ß–ò–°–¢–ö–ê –ö–û–î–ê**

#### –£–¥–∞–ª–∏—Ç—å deprecated —Ñ—É–Ω–∫—Ü–∏–∏
- `forceLoadPlayers()` - –ø–æ–º–µ—á–µ–Ω–∞ –∫–∞–∫ deprecated
- –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–µ—Ç–æ–¥—ã –≤ `PlayersPanel`
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—É—é –ª–æ–≥–∏–∫—É –≤ `BankModule`

## üìà –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- **–£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∫–æ–¥–∞ –Ω–∞ ~50%** (—Å ~30,000 –¥–æ ~15,000 —Å—Ç—Ä–æ–∫)
- **–£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ ~30%** –∑–∞ —Å—á–µ—Ç —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- **–£–ø—Ä–æ—â–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏** - –æ–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è
- **–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** - –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥

## üéØ –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –≠—Ç–∞–ø 1: –£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è (–ö—Ä–∏—Ç–∏—á–Ω–æ)
1. –£–¥–∞–ª–∏—Ç—å –≤—Å–µ micromodules
2. –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏ –≤ `assets/js/modules/`

### –≠—Ç–∞–ø 2: –ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π (–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
1. –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å `BaseModule`
2. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å –≤—Å–µ –º–æ–¥—É–ª–∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞
3. –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### –≠—Ç–∞–ø 3: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
1. –£–±—Ä–∞—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –≤—ã–∑–æ–≤—ã
2. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
3. –£–¥–∞–ª–∏—Ç—å deprecated —Ñ—É–Ω–∫—Ü–∏–∏

### –≠—Ç–∞–ø 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ö—Ä–∏—Ç–∏—á–Ω–æ)
1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–≥—Ä—ã
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–ª–æ–º–∞–ª–æ—Å—å
3. –ü—Ä–æ–≤–µ—Å—Ç–∏ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## ‚ö†Ô∏è –†–∏—Å–∫–∏

- **–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –ø–æ–ª–æ–º–∫–∏** –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞
- **–ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å —Ç—â–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
- **–í–æ–∑–º–æ–∂–Ω–∞—è –ø–æ—Ç–µ—Ä—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏** –µ—Å–ª–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ —Å–æ–¥–µ—Ä–∂–∞–ª —Ä–∞–∑–ª–∏—á–∏—è

## üöÄ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–¥–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ:
- –ó–∞–º–µ–¥–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É
- –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞
- –°–æ–∑–¥–∞–µ—Ç —Ä–∏—Å–∫–∏ –æ—à–∏–±–æ–∫
- –£—Å–ª–æ–∂–Ω—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –Ω–∞—á–∞—Ç—å —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è** –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏–≥—Ä—ã.
